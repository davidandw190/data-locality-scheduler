apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: data-locality-webhook
  annotations:
    cert-manager.io/inject-ca-from: data-locality-scheduler/data-locality-webhook-cert
webhooks:
- name: pod-annotator.data-locality-scheduler.svc
  clientConfig:
    service:
      name: data-locality-webhook
      namespace: data-locality-scheduler
      path: "/mutate"
      port: 443
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVNVENDQXhtZ0F3SUJBZ0lRRXZ2MEt0MHJhNFBrd0RIQml0UlhuekFOQmdrcWhraUc5dzBCQVFzRkFEQmMKTVI0d0hBWURWUVFLRXhWa1lYUmhMV3h2WTJGc2FYUjVMWGRsWW1odmIyc3hPakE0QmdOVkJBTVRNV1JoZEdFdApiRzlqWVd4cGRIa3RkMlZpYUc5dmF5NWtZWFJoTFd4dlkyRnNhWFI1TFhOamFHVmtkV3hsY2k1emRtTXdIaGNOCk1qVXdOREl5TWpFeU9ERTNXaGNOTWpZd05ESXlNakV5T0RFM1dqQmNNUjR3SEFZRFZRUUtFeFZrWVhSaExXeHYKWTJGc2FYUjVMWGRsWW1odmIyc3hPakE0QmdOVkJBTVRNV1JoZEdFdGJHOWpZV3hwZEhrdGQyVmlhRzl2YXk1awpZWFJoTFd4dlkyRnNhWFI1TFhOamFHVmtkV3hsY2k1emRtTXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCCkR3QXdnZ0VLQW9JQkFRRFBCelVuQXhSdllzZ2pWb0RWVmdnMkFYTUNjTGlkSUpuMjVxWmRMQ0V6WUpQWWtOL2gKL3RGdHdpVGovRkdraWRYam1Ia3hoZTBYTERCNDI4SlFtMVZ4ZUJ1ckpUd0N4c2orNm54RHhHMmthU0gwYmhYZAowZEtCaERrMWtyU0wzUEhxOFFNdnpieWtYQ0ZYQkFaYUZ2RHZCK0RFdkRpWnFUM1FRMkZiazFoOHRZRldGeHBCCnhuOStCM3Y4MFFadW9WaXNCemlpVHA3dWQ1UDdFOHVZUzZHTFhxa2UyOE42ZVFCVlFSU2NrRkZhYzAvNnd3aDUKRmVoMzdBMGRzUFpWQTVwbHovaSt0cFJMM2pkL1FOZjV5YmVEclVvbU1MZ1ZPc2V1Z2ZXRStNeTNGNTVLbU9wbgpObVEzQ1N1NktBU0w0SVRLeEdXdVIrSTdqSnVTVUQ5R0NVZEJBZ01CQUFHamdlNHdnZXN3RXdZRFZSMGxCQXd3CkNnWUlLd1lCQlFVSEF3RXdEQVlEVlIwVEFRSC9CQUl3QURDQnhRWURWUjBSQklHOU1JRzZnaFZrWVhSaExXeHYKWTJGc2FYUjVMWGRsWW1odmIydUNMV1JoZEdFdGJHOWpZV3hwZEhrdGQyVmlhRzl2YXk1a1lYUmhMV3h2WTJGcwphWFI1TFhOamFHVmtkV3hsY29JeFpHRjBZUzFzYjJOaGJHbDBlUzEzWldKb2IyOXJMbVJoZEdFdGJHOWpZV3hwCmRIa3RjMk5vWldSMWJHVnlMbk4yWTRJL1pHRjBZUzFzYjJOaGJHbDBlUzEzWldKb2IyOXJMbVJoZEdFdGJHOWoKWVd4cGRIa3RjMk5vWldSMWJHVnlMbk4yWXk1amJIVnpkR1Z5TG14dlkyRnNNQTBHQ1NxR1NJYjNEUUVCQ3dVQQpBNElCQVFET3E0Z215L2hSNWlrMDVYNW9meHdSRlpIOHFqb0cyQVVBT3JtZlVLRVo3bVFWSVBkeHZqQjlPdUdjCmtNUVJLLy9MMGZUOUZtbzBoL0NjRWxyaHhHRS9ZK0s3WVJTd1F1Qld6MUxNeXVEUElSMlhZL2hVeUFXaWxGTjAKczlSOHRTNFE2TjFKQ2c3REpzOG9yOWlmV2I1MlJQaUVOUVRUaGk5RmhzdFJ3ZjBPRE9QQUo2SEJnOHllY2JjdAp4eEVGN09YelVZT3l2anNtMWpHSkkzSEdXVktTV2liT3Mvd2FBdkhRSktNM3drYTFtdkZlSjRuTG1VWHljUFlEClRGUE1VcjEydnpuakM0RU81NThXMUx2Q1hGN3FZUjAzZW9rVmxaTEVEUEJPaTFtc0FPY3M3OG5SdDZSQXBETUkKZmwwVHR1NGxhd1dUUGRKalZUNjBRV2lDdkZRcQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  rules:
  - apiGroups: [ "" ]
    apiVersions: [ "v1" ]
    operations: [ "CREATE" ]
    resources: [ "pods" ]
    scope: "Namespaced"
  namespaceSelector:
    matchExpressions:
    - key: kubernetes.io/metadata.name
      operator: In
      values: [ "eo-workflow", "data-locality-scheduler", "knative-serving" ]
  sideEffects: None
  admissionReviewVersions: [ "v1" ]
  failurePolicy: Ignore
  timeoutSeconds: 5
